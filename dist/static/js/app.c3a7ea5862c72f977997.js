webpackJsonp([3],{187:function(t,e,n){"use strict";var i=n(131),a=n(469);i.a.use(a.a);var o=function(t){return n.e(0).then(function(){var e=[n(474)];t.apply(null,e)}.bind(this)).catch(n.oe)},s=function(t){return n.e(1).then(function(){var e=[n(475)];t.apply(null,e)}.bind(this)).catch(n.oe)},r=[{path:"/",meta:{},component:s},{path:"/save",meta:{},component:s},{path:"*",component:o}],c=new a.a({routes:r});c.afterEach(function(t,e){}),e.a=c},188:function(t,e,n){"use strict";var i=n(203),a=n.n(i),o=n(211),s=n.n(o),r=n(208),c=n.n(r),g=n(209),h=n.n(g),l=n(197),u=n(471),p=n.n(u);window.EVENT_STORAGE=void 0===window.EVENT_STORAGE?{}:window.EVENT_STORAGE;var d=function(){function t(){c()(this,t)}return h()(t,[{key:"install",value:function(t,e){this.installMixin(t),this.installExtendsFunction(),this.installComponent(t),this.installPrototype(t),this.installFilter(t)}},{key:"installMixin",value:function(t){t.mixin({created:function(){},mounted:function(){window.scrollTo(0,0)},methods:{}})}},{key:"installExtendsFunction",value:function(){!function(t,e){var n=t.documentElement,i="orientationchange"in window?"orientationchange":"resize",a=function(){var t=n.clientWidth;t&&(n.style.fontSize=t/750*625+"%")};t.addEventListener&&(e.addEventListener(i,a,!1),t.addEventListener("DOMContentLoaded",a,!1))}(document,window),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t}}},{key:"installComponent",value:function(t){t.component("CreateImage",p.a)}},{key:"installFilter",value:function(t){}},{key:"installPrototype",value:function(t){t.prototype.KEYS={USER_INFO:"USER_INFO"},t.prototype.EVENTS={},t.prototype.getSession=function(t){var e=window.sessionStorage.getItem(t);if(""===e)return null;try{e=JSON.parse(e)}catch(t){return e}return e},t.prototype.setSession=function(t,e){void 0===e?window.sessionStorage.removeItem(t):("object"===(void 0===e?"undefined":s()(e))&&(e=a()(e)),window.sessionStorage.setItem(t,e))},t.prototype.getStorage=function(t){var e=window.localStorage.getItem(t);if(""===e)return{};try{e=JSON.parse(e)}catch(t){return e}return e||{}},t.prototype.setStorage=function(t,e){void 0===e?window.localStorage.removeItem(t):("object"===(void 0===e?"undefined":s()(e))&&(e=a()(e)),window.localStorage.setItem(t,e))},t.prototype.get=function(t){return fetch(l.a.INTERFACE+t,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(e){return console.group("请求接口："+t),console.log("响应结果：",JSON.parse(a()(e))),console.groupEnd(),e}).catch(function(t){console.error(t)})},t.prototype.post=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{interfaceType:""},i=l.a.INTERFACE;switch(n.interfaceType){case"weichat":i=l.a.WECHAT+t}return console.group("请求接口："+t),console.log("求情参数：",e),fetch(i+t,{method:"post",headers:{"Content-Type":"application/json"},body:new Blob([a()(e)],{type:"application/json"})}).then(function(t){return t.json()}).then(function(t){return console.log("响应结果：",JSON.parse(a()(t))),console.groupEnd(),t}).catch(function(t){console.error(t),console.groupEnd()})},t.prototype.concatFileUrl=function(t,e,n){var i="";return void 0!==e&&void 0!==n&&(i="?imageView2/0/w/"+e+"/h/"+n),l.a.IMAGE_PATH+""+t+i},t.prototype.subscribe=function(t,e,n){var i=window.EVENT_STORAGE[t];void 0===i&&(i=[]),i.push({owner:e,cb:n}),window.EVENT_STORAGE[t]=i},t.prototype.unsubscribe=function(t,e){var n=window.EVENT_STORAGE[t];if(void 0===n)return console.error("取消订阅事件失败："+t+",事件不存在"),!1;window.EVENT_STORAGE[t]=n.filter(function(t){return t.owner!==e})},t.prototype.broadcast=function(t,e,n,i){var a=window.EVENT_STORAGE[t];if(console.group("广播消息：",t),void 0===a||0===a.length)return console.error("推送事件："+t+",不存在订阅者"),console.groupEnd(),!1;a.map(function(i){i.cb(n),console.log("推送人："+e+",推送事件："+t+",参数："+n+",接收者："+i.owner)}),i&&i(),console.log("接收者共："+a.length),console.groupEnd()},t.prototype.downloadFile=function(t){window.open(t);var e=document.createElement("a");e.href=t,e.setAttribute("download",""),e.style.display="none",document.body.appendChild(e),setTimeout(function(){e.click(),document.body.removeChild(e)},66)},t.prototype.fileFilter=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pic",n=t.name,i=[];switch(e){case"pic":i=[".jpeg",".jpg",".png"];break;case"file":i=[".doc",".docx",".xls",".xlsx",".pdf",".jpeg",".png",".jpg"]}var a=n.toLowerCase().split(".")[1];return-1!==i.indexOf("."+a)},t.prototype.$isMaxScreen=function(){return screen.height/screen.width>=2},t.prototype.$needSmoothTouch=function(){return!/iphone/gi.test(navigator.userAgent)||(812!==screen.height||375!==screen.width)}}}]),t}();e.a=d},190:function(t,e){},193:function(t,e,n){n(458);var i=n(132)(n(199),n(468),null,null);t.exports=i.exports},197:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(204),a=n.n(i),o={IMAGE_PATH:"https://img.guoanfamily.com/",WECHAT:"//www.guoanfamily.com/openweixin/"},s={INTERFACE:"https://www.guoanfamily.com/anniversary/"},r={INTERFACE:"https://www.guoanfamily.com/anniversary/"},c=function(){return-1===window.location.host.indexOf("guoanfamily.com")}()?s:r;c=a()(o,c)},198:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(131),a=n(191),o=n.n(a),s=n(187),r=n(193),c=n.n(r),g=n(189),h=(n.n(g),n(192)),l=(n.n(h),n(194)),u=(n.n(l),n(188)),p=n(190);n.n(p);o.a.attach(document.body),i.a.config.productionTip=!1,i.a.config.silent=!0,n.i(h.install)(),i.a.use(new u.a),new i.a({router:s.a,render:function(t){return t(c.a)}}).$mount("#app-box")},199:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{res:["http://img.guoanfamily.com/spring/pages/page_01.jpg","http://img.guoanfamily.com/spring/pages/page_02.jpg","http://img.guoanfamily.com/spring/pages/page_03.jpg","http://img.guoanfamily.com/spring/pages/page_04.jpg","http://img.guoanfamily.com/spring/pages/page_05.jpg","http://img.guoanfamily.com/spring/pages/page_06.jpg","http://img.guoanfamily.com/spring/pages/page_07.jpg","http://img.guoanfamily.com/spring/pages/page_08.jpg","http://img.guoanfamily.com/spring/pages/page_09.jpg","http://img.guoanfamily.com/spring/pages/page_10.jpg","http://img.guoanfamily.com/spring/pages/page_11.jpg","http://img.guoanfamily.com/spring/pages/page_12.jpg","http://img.guoanfamily.com/spring/pages/page_13.jpg","http://img.guoanfamily.com/spring/pages/page_14.jpg","http://img.guoanfamily.com/spring/pages/page_15.jpg","http://img.guoanfamily.com/spring/pages/page_16.jpg","http://img.guoanfamily.com/spring/pages/page_17.jpg","http://img.guoanfamily.com/spring/pages/page-gif.gif",this.$isMaxScreen()?"http://img.guoanfamily.com/spring/pages/image-bg-max.png":"http://img.guoanfamily.com/spring/pages/image-bg.png"],loadComplete:!1,needAuth:!1}},created:function(){this.complete()},mounted:function(){this.getSession("IMAGE")&&(this.setSession("IMAGE"),this.loadComplete=!0)},methods:{getQueryString:function(t){if(!window.location.href.includes("?"))return null;var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.href.split("?")[1].match(e);return null!=n?decodeURIComponent(n[2]):null},complete:function(){this.loadComplete=!0}},watch:{},components:{}}},200:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(210),a=n.n(i),o=n(133),s=n.n(o),r=n(196),c=n.n(r),g=n(195),h=n.n(g),l=n(462),u=n.n(l),p=n(463),d=n.n(p),m=[{msg:["加薪不加班"]},{msg:["随时能脱单"]},{msg:["平地起惊雷","又比去年肥"]},{msg:["得鸿运 利仕途","能旺夫"]},{msg:["情之起一往深而至挚"]},{msg:["保持现状","瘦不下去"]},{msg:["一夜暴富","富到流油"]},{msg:["涨工资","不吃土"]},{msg:["比翼鸟连理枝喜相逢"]},{msg:["没办法","只能靠脸吃饭"]},{msg:["买买买","最不缺的就是钱！"]},{msg:["每天加班","为公司奉献！"]},{msg:["努力就会有回报","期望的都会实现"]},{msg:["人见人爱","花见花开"]},{msg:["升职加薪","丰厚年终奖"]},{msg:["吃得苦中苦","照样普通人"]},{msg:["年假不让休"]}];e.default={props:{},data:function(){return{wWidth:0,wHeight:0,ctx:null,ctxBox:null,imageUrl:"",lastPoint:null,headPosition:{x:0,y:0,w:0,h:0},me:null,bg:null,saved:!1}},created:function(){},mounted:function(){this.$isMaxScreen()?(this.wWidth=1440,this.wHeight=2560,this.headPosition={x:0,y:250,w:0,h:0}):(this.wWidth=1440,this.wHeight=2332,this.headPosition={x:0,y:250,w:0,h:0}),this.init(window.sessionStorage.getItem("IMAGE"))},methods:{chooseImage:function(t){var e=function(){var t=h()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.result,t.next=3,this.formatImg(i);case 3:if(e=t.sent,!(i.size/1048576>2)){t.next=8;break}return t.next=7,this.compressImage(e);case 7:e=t.sent;case 8:this.setSession("IMAGE",e),this.init(window.sessionStorage.getItem("IMAGE"));case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),n=new FileReader,i=t.target.files[0],a=i.name.toLowerCase();if(!a.includes("png")&&!a.includes("jpg")&&!a.includes("jpeg"))return void alert("请选择图片");n.onload=e.bind(this),n.readAsDataURL(i)},compressImage:function(t){return new s.a(function(e){var n=new Image;n.onload=function(t){var i=n.width,a=n.height,o=parseInt(720/i*a),s=document.createElement("canvas");s.width=720,s.height=o,s.getContext("2d").drawImage(n,0,0,i,a,0,0,720,o),e(s.toDataURL("image/jpeg"))},n.src=t})},formatImg:function(t){var e=void 0;EXIF.getData(t,function(){EXIF.getAllTags(this),e=EXIF.getTag(this,"Orientation")});var n=this.rotateImg;return new s.a(function(i){var a=new FileReader;a.onload=function(t){var a=new Image;a.src=t.target.result,a.onload=function(){var t=this.naturalWidth,a=this.naturalHeight;this.naturalWidth>this.naturalHeight&&this.naturalWidth>800?(t=800,a=t*this.naturalHeight/this.naturalWidth):this.naturalHeight>this.naturalWidth&&this.naturalHeight>1200&&(a=1200,t=a*this.naturalWidth/this.naturalHeight);var o=document.createElement("canvas"),s=o.getContext("2d");if(o.width=t,o.height=a,s.drawImage(this,0,0,t,a),""!==e&&1!==e)switch(e){case 6:n(this,"left",o);break;case 8:n(this,"right",o);break;case 3:n(this,"right",o),n(this,"right",o)}i(o.toDataURL("image/jpeg",.8))}},a.readAsDataURL(t)})},rotateImg:function(t,e,n){if(null!=t){var i=t.height,a=t.width,o=2;null==o&&(o=0),"right"===e?++o>3&&(o=0):--o<0&&(o=3);var s=90*o*Math.PI/180,r=n.getContext("2d");switch(o){case 0:n.width=a,n.height=i,r.drawImage(t,0,0);break;case 1:n.width=i,n.height=a,r.rotate(s),r.drawImage(t,0,-i);break;case 2:n.width=a,n.height=i,r.rotate(s),r.drawImage(t,-a,-i);break;case 3:n.width=i,n.height=a,r.rotate(s),r.drawImage(t,-a,0)}}},init:function(t){var e=this;return h()(c.a.mark(function n(){var i,a,o,s,r,g,h,l,p,f,w,v,y;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=document.getElementById("paletteBox"),a=i.getContext("2d"),e.ctxBox=a,a.imageSmoothingQuality="high",a.imageSmoothingEnabled=!0,o=document.getElementById("palette"),s=o.getContext("2d"),e.ctx=s,s.imageSmoothingQuality="high",s.imageSmoothingEnabled=!0,s.clearRect(0,0,e.wWidth,e.wHeight),n.next=13,e.loadImage(t);case 13:return r=n.sent,n.next=16,e.loadImage(e.$isMaxScreen()?u.a:d.a);case 16:g=n.sent,e.me=r,e.bg=g,h=e.headPosition,l=h.x,p=h.y,f=e.wWidth,w=parseInt(f/r.width*r.height),s.drawImage(r,0,0,r.width,r.height,l,p,f,w),e.headPosition={x:l,y:p,w:f,h:w},a.drawImage(g,0,0,g.width,g.height,0,0,e.wWidth,e.wHeight),v=m.length*Math.random(),y=m[parseInt(v)],y.msg.map(function(t,n){a.font="120px 黑体",a.fillStyle="#ffffff",a.textBaseline="middle",a.textAlign="center";var i=void 0;1===y.msg.length?(i=1700,e.$isMaxScreen()&&(i=1920)):(a.font="100px 黑体",0===n?(i=1630,e.$isMaxScreen()&&(i=1850)):(i=1770,e.$isMaxScreen()&&(i=1990))),a.fillText(t,720,i,760)}),e.touchControl(i);case 29:case"end":return n.stop()}},n,e)}))()},loadImage:function(t){return new s.a(function(e,n){var i=new Image;i.onload=function(){e(i)},i.src=t})},touchControl:function(t){var e=this;t.addEventListener("touchstart",function(t){e.lastPoint=null},!1),t.addEventListener("touchmove",function(t){t.preventDefault();var n=e.me,i=(e.bg,e.ctx);if(1===t.touches.length){var o=e.headPosition,s=o.x,r=o.y,c=o.w,g=o.h,h=t.touches[0],l=h.clientX,u=h.clientY;if(e.lastPoint){i.clearRect(0,0,e.wWidth,e.wHeight);var p=e.lastPoint,d=p.px,m=p.py,f=l-d,w=u-m;e.$needSmoothTouch()&&(f*=4,w*=4),i.drawImage(n,0,0,n.width,n.height,s+f,r+w,c,g),e.headPosition={x:s+f,y:r+w,w:c,h:g}}e.lastPoint={px:l,py:u}}else if(2===t.touches.length){var v=a()(t.touches,2),y=v[0],x=y.clientX,E=y.clientY,I=v[1],_=I.clientX,b=I.clientY;if(e.lastPoint){i.clearRect(0,0,e.wWidth,e.wHeight);var S=e.lastPoint,C=S.px1,T=S.py1,j=S.px2,M=S.py2,R=Math.abs(C-j),A=Math.abs(T-M),P=Math.abs(x-_),H=Math.abs(E-b),W=e.headPosition;W=Math.abs(P-R)>Math.abs(H-A)?e.scaleImage(P-R,0,W):e.scaleImage(0,H-A,W);var F=W,N=F.x,O=F.y,k=F.w,$=F.h;i.drawImage(n,0,0,n.width,n.height,N,O,k,$),e.headPosition=W}e.lastPoint={px1:x,py1:E,px2:_,py2:b}}},!1),t.addEventListener("touchend",function(t){e.lastPoint=null},!1)},scaleImage:function(t,e,n){var i=n.x,a=n.y,o=n.w,s=n.h;return this.$needSmoothTouch()&&(t*=4,e*=4),t?(s*=(o+t)/o,o+=t):e&&(o*=(s+e)/s,s+=e),{x:i,y:a,w:o,h:s}},saveImage:function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=this.wWidth,t.height=this.wHeight,e.drawImage(document.getElementById("palette"),0,0,this.wWidth,this.wHeight,0,0,this.wWidth,this.wHeight),e.drawImage(document.getElementById("paletteBox"),0,0,this.wWidth,this.wHeight,0,0,this.wWidth,this.wHeight),this.imageUrl=t.toDataURL("image/jpeg"),this.saved=!0}},components:{}}},457:function(t,e){},458:function(t,e){},462:function(t,e,n){t.exports=n.p+"static/img/image-bg-max.4248d04.png"},463:function(t,e,n){t.exports=n.p+"static/img/image-bg.66dab7e.png"},467:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[t.saved?n("img",{staticClass:"picture",attrs:{src:t.imageUrl,alt:"",id:"picture"}}):t._e(),t._v(" "),t.saved?n("div",{staticClass:"toast"},[t._v("长按保存图片分享")]):t._e(),t._v(" "),n("div",{staticClass:"toast"},[t._v("请拖放图片到合适位置")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.saved,expression:"!saved"}]},[n("canvas",{staticClass:"palette",attrs:{id:"palette",height:t.wHeight,width:t.wWidth}}),t._v(" "),n("canvas",{staticClass:"palette palette-box",attrs:{id:"paletteBox",height:t.wHeight,width:t.wWidth}}),t._v(" "),n("div",{staticClass:"re-choose"},[t._v("\n            选择图片\n            "),n("input",{staticClass:"choose-image",attrs:{type:"file",id:"file"},on:{change:t.chooseImage}})]),t._v(" "),n("button",{staticClass:"save",on:{click:t.saveImage}},[t._v("确定")])])])},staticRenderFns:[]}},468:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.needAuth?t._e():n("div",[n("router-view",{directives:[{name:"show",rawName:"v-show",value:t.loadComplete,expression:"loadComplete"}]})],1)])},staticRenderFns:[]}},471:function(t,e,n){n(457);var i=n(132)(n(200),n(467),"data-v-53e49704",null);t.exports=i.exports}},[198]);